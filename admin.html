<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Painel Lima Motos - Simplificado</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        :root {
            --verde-lima: #8bc34a;
            --laranja-lima: #ff9800;
            --preto: #212121;
            --branco: #ffffff;
            --cinza-claro: #f5f5f5;
            --cinza-escuro: #757575;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--cinza-claro);
            color: var(--preto);
        }

        .admin-container {
            display: flex;
            min-height: 100vh;
        }

        /* Sidebar */
        .sidebar {
            width: 250px;
            background-color: var(--preto);
            color: var(--branco);
            padding: 20px 0;
        }

        .logo-admin {
            text-align: center;
            padding: 0 20px 20px;
            border-bottom: 1px solid #333;
        }

        .logo-admin h2 {
            color: var(--verde-lima);
            margin-top: 10px;
        }

        .admin-menu {
            list-style: none;
            margin-top: 20px;
        }

        .admin-menu li a {
            display: block;
            color: var(--branco);
            padding: 12px 20px;
            text-decoration: none;
            transition: all 0.3s;
        }

        .admin-menu li a:hover, .admin-menu li a.active {
            background-color: var(--verde-lima);
            color: var(--preto);
        }

        .admin-menu li a i {
            margin-right: 10px;
            width: 20px;
            text-align: center;
        }

        /* Main Content */
        .main-content {
            flex: 1;
            padding: 20px;
        }

        .header-admin {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            padding-bottom: 15px;
            border-bottom: 1px solid #ddd;
        }

        .btn {
            padding: 8px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s;
        }

        .btn-primary {
            background-color: var(--verde-lima);
            color: var(--preto);
        }

        .btn-primary:hover {
            background-color: var(--laranja-lima);
        }

        .btn-danger {
            background-color: #f44336;
            color: var(--branco);
        }

        .btn-sm {
            padding: 5px 10px;
            font-size: 12px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 20px;
        }

        table th, table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        table th {
            background-color: #f5f5f5;
            font-weight: 600;
        }

        .card {
            background-color: var(--branco);
            border-radius: 5px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .form-control {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }

        .text-success {
            color: var(--verde-lima);
        }

        .text-warning {
            color: var(--laranja-lima);
        }

        .text-danger {
            color: #f44336;
        }

        /* Tabs */
        .tabs {
            display: flex;
            border-bottom: 1px solid #ddd;
            margin-bottom: 20px;
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }

        .tab.active {
            border-bottom: 2px solid var(--verde-lima);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        /* Login Screen */
        .login-container {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: var(--cinza-claro);
        }

        .login-box {
            background-color: var(--branco);
            padding: 30px;
            border-radius: 5px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            width: 100%;
            max-width: 400px;
        }

        .login-box h2 {
            text-align: center;
            margin-bottom: 20px;
            color: var(--verde-lima);
        }

        /* Responsividade */
        @media (max-width: 768px) {
            .admin-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: auto;
            }
            
            .admin-menu {
                display: flex;
                flex-wrap: wrap;
            }
            
            .admin-menu li {
                flex: 1 0 auto;
            }
        }
    </style>
</head>
<body>
    <!-- Tela de Login -->
    <div id="login-screen" class="login-container">
        <div class="login-box">
            <h2><i class="fas fa-motorcycle"></i> Lima Motos</h2>
            <h3>Acesso Administrativo</h3>
            <form id="login-form">
                <div class="form-group">
                    <label for="username">Usuário</label>
                    <input type="text" id="username" class="form-control" required>
                </div>
                <div class="form-group">
                    <label for="password">Senha</label>
                    <input type="password" id="password" class="form-control" required>
                </div>
                <button type="submit" class="btn btn-primary" style="width: 100%;">
                    <i class="fas fa-sign-in-alt"></i> Entrar
                </button>
            </form>
        </div>
    </div>

    <!-- Painel Administrativo (inicialmente oculto) -->
    <div id="admin-panel" class="admin-container" style="display: none;">
        <!-- Sidebar -->
        <div class="sidebar">
            <div class="logo-admin">
                <i class="fas fa-motorcycle" style="font-size: 40px; color: var(--laranja-lima);"></i>
                <h2>Lima Motos</h2>
                <p>Painel Administrativo</p>
            </div>
            
            <ul class="admin-menu">
                <li><a href="#" class="active" data-tab="dashboard"><i class="fas fa-tachometer-alt"></i> Dashboard</a></li>
                <li><a href="#" data-tab="products"><i class="fas fa-motorcycle"></i> Produtos</a></li>
                <li><a href="#" data-tab="orders"><i class="fas fa-shopping-cart"></i> Pedidos</a></li>
                <li><a href="#" data-tab="customers"><i class="fas fa-users"></i> Clientes</a></li>
                <li><a href="#" data-tab="settings"><i class="fas fa-cog"></i> Configurações</a></li>
                <li><a href="#" id="logout-btn"><i class="fas fa-sign-out-alt"></i> Sair</a></li>
            </ul>
        </div>

        <!-- Main Content -->
        <div class="main-content">
            <!-- Dashboard Tab -->
            <div id="dashboard" class="tab-content active">
                <div class="header-admin">
                    <h2><i class="fas fa-tachometer-alt"></i> Dashboard</h2>
                    <div>Bem-vindo, <strong>João Soares</strong> | Lima Motos</div>
                </div>

                <!-- Cards Resumo -->
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;">
                    <div class="card">
                        <h3>Total de Vendas</h3>
                        <p style="font-size: 24px; font-weight: bold; color: var(--verde-lima);" id="total-sales">R$ 0,00</p>
                        <p><i class="fas fa-chart-line"></i> <span id="sales-growth">0%</span> crescimento</p>
                    </div>
                    <div class="card">
                        <h3>Pedidos Hoje</h3>
                        <p style="font-size: 24px; font-weight: bold; color: var(--laranja-lima);" id="today-orders">0</p>
                        <p><i class="fas fa-shopping-cart"></i> <span id="new-orders">0</span> novos</p>
                    </div>
                    <div class="card">
                        <h3>Produtos</h3>
                        <p style="font-size: 24px; font-weight: bold;" id="total-products">0</p>
                        <p><i class="fas fa-box"></i> <span id="low-stock">0</span> com estoque baixo</p>
                    </div>
                    <div class="card">
                        <h3>Clientes</h3>
                        <p style="font-size: 24px; font-weight: bold;" id="total-customers">0</p>
                        <p><i class="fas fa-user-plus"></i> <span id="new-customers">0</span> novos</p>
                    </div>
                </div>

                <!-- Últimos Pedidos -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-shopping-cart"></i> Últimos Pedidos</h3>
                        <a href="#" class="btn btn-primary" data-tab="orders">Ver Todos</a>
                    </div>
                    
                    <table id="recent-orders">
                        <thead>
                            <tr>
                                <th>Nº Pedido</th>
                                <th>Cliente</th>
                                <th>Data</th>
                                <th>Valor</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Preenchido via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Products Tab -->
            <div id="products" class="tab-content">
                <div class="header-admin">
                    <h2><i class="fas fa-motorcycle"></i> Gerenciar Produtos</h2>
                    <button class="btn btn-primary" id="add-product-btn"><i class="fas fa-plus"></i> Adicionar Produto</button>
                </div>

                <!-- Formulário de Produto (inicialmente oculto) -->
                <div id="product-form-container" class="card" style="display: none; margin-bottom: 20px;">
                    <div class="card-header">
                        <h3 id="form-title">Adicionar Novo Produto</h3>
                    </div>
                    <form id="product-form">
                        <input type="hidden" id="product-id">
                        <div class="form-group">
                            <label for="product-name">Nome do Produto</label>
                            <input type="text" id="product-name" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="product-brand">Marca</label>
                            <input type="text" id="product-brand" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="product-category">Categoria</label>
                            <select id="product-category" class="form-control" required>
                                <option value="">Selecione...</option>
                                <option value="peças">Peças</option>
                                <option value="pneus">Pneus</option>
                                <option value="acessorios">Acessórios</option>
                                <option value="vestuario">Vestuário</option>
                                <option value="oleos">Óleos e Fluidos</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="product-price">Preço (R$)</label>
                            <input type="number" id="product-price" class="form-control" step="0.01" required>
                        </div>
                        <div class="form-group">
                            <label for="product-stock">Estoque</label>
                            <input type="number" id="product-stock" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="product-description">Descrição</label>
                            <textarea id="product-description" class="form-control" rows="3"></textarea>
                        </div>
                        <div class="form-group">
                            <label for="product-image">URL da Imagem</label>
                            <input type="text" id="product-image" class="form-control" placeholder="https://...">
                        </div>
                        <button type="submit" class="btn btn-primary">Salvar Produto</button>
                        <button type="button" class="btn btn-danger" id="cancel-product-btn" style="margin-left: 10px;">Cancelar</button>
                    </form>
                </div>

                <!-- Lista de Produtos -->
                <div class="card">
                    <div class="card-header">
                        <h3><i class="fas fa-list"></i> Lista de Produtos</h3>
                        <div>
                            <input type="text" id="product-search" placeholder="Buscar produtos..." style="padding: 5px; border: 1px solid #ddd; border-radius: 4px;">
                        </div>
                    </div>
                    
                    <table id="products-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>Marca</th>
                                <th>Categoria</th>
                                <th>Preço</th>
                                <th>Estoque</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Preenchido via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Orders Tab -->
            <div id="orders" class="tab-content">
                <div class="header-admin">
                    <h2><i class="fas fa-shopping-cart"></i> Gerenciar Pedidos</h2>
                </div>

                <div class="card">
                    <div class="tabs">
                        <div class="tab active" data-order-status="all">Todos</div>
                        <div class="tab" data-order-status="pending">Pendentes</div>
                        <div class="tab" data-order-status="processing">Processando</div>
                        <div class="tab" data-order-status="shipped">Enviados</div>
                        <div class="tab" data-order-status="delivered">Entregues</div>
                    </div>
                    
                    <table id="orders-table">
                        <thead>
                            <tr>
                                <th>Nº Pedido</th>
                                <th>Cliente</th>
                                <th>Data</th>
                                <th>Total</th>
                                <th>Status</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Preenchido via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Customers Tab -->
            <div id="customers" class="tab-content">
                <div class="header-admin">
                    <h2><i class="fas fa-users"></i> Gerenciar Clientes</h2>
                </div>

                <div class="card">
                    <table id="customers-table">
                        <thead>
                            <tr>
                                <th>Nome</th>
                                <th>E-mail</th>
                                <th>Telefone</th>
                                <th>Pedidos</th>
                                <th>Cadastro</th>
                                <th>Ações</th>
                            </tr>
                        </thead>
                        <tbody>
                            <!-- Preenchido via JavaScript -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settings" class="tab-content">
                <div class="header-admin">
                    <h2><i class="fas fa-cog"></i> Configurações</h2>
                </div>

                <div class="card">
                    <h3>Informações da Loja</h3>
                    <form id="store-settings-form">
                        <div class="form-group">
                            <label for="store-name">Nome da Loja</label>
                            <input type="text" id="store-name" class="form-control" value="Lima Motos">
                        </div>
                        <div class="form-group">
                            <label for="store-email">E-mail</label>
                            <input type="email" id="store-email" class="form-control" value="casa.l@gmail.com">
                        </div>
                        <div class="form-group">
                            <label for="store-phone">Telefone</label>
                            <input type="text" id="store-phone" class="form-control" value="(99) 99220-0629">
                        </div>
                        <div class="form-group">
                            <label for="store-address">Endereço</label>
                            <textarea id="store-address" class="form-control" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Salvar Configurações</button>
                    </form>
                </div>

                <div class="card">
                    <h3>Alterar Senha</h3>
                    <form id="change-password-form">
                        <div class="form-group">
                            <label for="current-password">Senha Atual</label>
                            <input type="password" id="current-password" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="new-password">Nova Senha</label>
                            <input type="password" id="new-password" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="confirm-password">Confirmar Nova Senha</label>
                            <input type="password" id="confirm-password" class="form-control" required>
                        </div>
                        <button type="submit" class="btn btn-primary">Alterar Senha</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dados iniciais (armazenados no LocalStorage)
        function initializeData() {
            if (!localStorage.getItem('limaMotosProducts')) {
                const initialProducts = [
                    {
                        id: 1,
                        name: "Kit Corrente 428 - CG 150/160",
                        brand: "Honda",
                        category: "peças",
                        price: 129.90,
                        stock: 15,
                        description: "Kit corrente original Honda para CG 150/160 Titan",
                        image: "https://via.placeholder.com/300x300?text=Kit+Corrente+CG"
                    },
                    {
                        id: 2,
                        name: "Pneu Dianteiro 90/90-18",
                        brand: "Yamaha",
                        category: "pneus",
                        price: 219.90,
                        stock: 8,
                        description: "Pneu dianteiro para Factor 150 | Medida 90/90-18",
                        image: "https://via.placeholder.com/300x300?text=Pneu+Yamaha"
                    },
                    {
                        id: 3,
                        name: "Capacete Jet Preto",
                        brand: "Fox",
                        category: "vestuario",
                        price: 189.90,
                        stock: 5,
                        description: "Capacete estilo jet | Tamanhos P-M-G | Certificado INMETRO",
                        image: "https://via.placeholder.com/300x300?text=Capacete+Fox"
                    }
                ];
                localStorage.setItem('limaMotosProducts', JSON.stringify(initialProducts));
            }

            if (!localStorage.getItem('limaMotosOrders')) {
                const initialOrders = [
                    {
                        id: 1001,
                        customer: "Carlos Silva",
                        date: "2023-05-10",
                        total: 289.90,
                        status: "delivered",
                        items: [
                            { productId: 1, quantity: 1, price: 129.90 },
                            { productId: 3, quantity: 1, price: 159.90 }
                        ]
                    },
                    {
                        id: 1002,
                        customer: "Ana Oliveira",
                        date: "2023-05-09",
                        total: 219.90,
                        status: "shipped",
                        items: [
                            { productId: 2, quantity: 1, price: 219.90 }
                        ]
                    }
                ];
                localStorage.setItem('limaMotosOrders', JSON.stringify(initialOrders));
            }

            if (!localStorage.getItem('limaMotosCustomers')) {
                const initialCustomers = [
                    {
                        id: 1,
                        name: "Carlos Silva",
                        email: "carlos@email.com",
                        phone: "(99) 99999-9999",
                        joinDate: "2023-04-15",
                        orders: 2
                    },
                    {
                        id: 2,
                        name: "Ana Oliveira",
                        email: "ana@email.com",
                        phone: "(99) 98888-8888",
                        joinDate: "2023-05-01",
                        orders: 1
                    }
                ];
                localStorage.setItem('limaMotosCustomers', JSON.stringify(initialCustomers));
            }

            if (!localStorage.getItem('limaMotosSettings')) {
                const initialSettings = {
                    storeName: "Lima Motos",
                    email: "casa.l@gmail.com",
                    phone: "(99) 99220-0629",
                    address: "",
                    adminPassword: "lima@2023" // Senha padrão - deve ser alterada
                };
                localStorage.setItem('limaMotosSettings', JSON.stringify(initialSettings));
            }
        }

        // Funções para manipular dados
        function getProducts() {
            return JSON.parse(localStorage.getItem('limaMotosProducts')) || [];
        }

        function saveProducts(products) {
            localStorage.setItem('limaMotosProducts', JSON.stringify(products));
        }

        function getOrders() {
            return JSON.parse(localStorage.getItem('limaMotosOrders')) || [];
        }

        function saveOrders(orders) {
            localStorage.setItem('limaMotosOrders', JSON.stringify(orders));
        }

        function getCustomers() {
            return JSON.parse(localStorage.getItem('limaMotosCustomers')) || [];
        }

        function saveCustomers(customers) {
            localStorage.setItem('limaMotosCustomers', JSON.stringify(customers));
        }

        function getSettings() {
            return JSON.parse(localStorage.getItem('limaMotosSettings')) || {};
        }

        function saveSettings(settings) {
            localStorage.setItem('limaMotosSettings', JSON.stringify(settings));
        }

        // Funções para renderizar dados
        function renderDashboard() {
            const products = getProducts();
            const orders = getOrders();
            const customers = getCustomers();
            
            // Calcular totais
            const totalSales = orders.reduce((sum, order) => sum + order.total, 0);
            const todayOrders = orders.filter(order => order.date === new Date().toISOString().split('T')[0]).length;
            const lowStockProducts = products.filter(product => product.stock < 5).length;
            const newCustomers = customers.filter(customer => {
                const joinDate = new Date(customer.joinDate);
                const monthAgo = new Date();
                monthAgo.setMonth(monthAgo.getMonth() - 1);
                return joinDate >= monthAgo;
            }).length;
            
            // Atualizar cards
            document.getElementById('total-sales').textContent = `R$ ${totalSales.toFixed(2).replace('.', ',')}`;
            document.getElementById('today-orders').textContent = todayOrders;
            document.getElementById('total-products').textContent = products.length;
            document.getElementById('low-stock').textContent = lowStockProducts;
            document.getElementById('total-customers').textContent = customers.length;
            document.getElementById('new-customers').textContent = newCustomers;
            
            // Últimos pedidos
            const recentOrdersTable = document.getElementById('recent-orders').querySelector('tbody');
            recentOrdersTable.innerHTML = '';
            
            const recentOrders = orders.slice(0, 5).reverse();
            recentOrders.forEach(order => {
                const row = document.createElement('tr');
                
                let statusClass = '';
                let statusText = '';
                switch(order.status) {
                    case 'pending':
                        statusClass = 'text-warning';
                        statusText = 'Pendente';
                        break;
                    case 'processing':
                        statusClass = 'text-warning';
                        statusText = 'Processando';
                        break;
                    case 'shipped':
                        statusClass = 'text-success';
                        statusText = 'Enviado';
                        break;
                    case 'delivered':
                        statusClass = 'text-success';
                        statusText = 'Entregue';
                        break;
                }
                
                row.innerHTML = `
                    <td>#LM${order.id}</td>
                    <td>${order.customer}</td>
                    <td>${formatDate(order.date)}</td>
                    <td>R$ ${order.total.toFixed(2).replace('.', ',')}</td>
                    <td class="${statusClass}">${statusText}</td>
                    <td>
                        <button class="btn btn-primary btn-sm view-order-btn" data-id="${order.id}">Detalhes</button>
                    </td>
                `;
                
                recentOrdersTable.appendChild(row);
            });
        }

        function renderProducts() {
            const products = getProducts();
            const productsTable = document.getElementById('products-table').querySelector('tbody');
            productsTable.innerHTML = '';
            
            products.forEach(product => {
                const row = document.createElement('tr');
                
                let stockClass = '';
                if (product.stock < 3) {
                    stockClass = 'text-danger';
                } else if (product.stock < 10) {
                    stockClass = 'text-warning';
                }
                
                row.innerHTML = `
                    <td>${product.name}</td>
                    <td>${product.brand}</td>
                    <td>${formatCategory(product.category)}</td>
                    <td>R$ ${product.price.toFixed(2).replace('.', ',')}</td>
                    <td class="${stockClass}">${product.stock}</td>
                    <td>
                        <button class="btn btn-primary btn-sm edit-product-btn" data-id="${product.id}">Editar</button>
                        <button class="btn btn-danger btn-sm delete-product-btn" data-id="${product.id}">Excluir</button>
                    </td>
                `;
                
                productsTable.appendChild(row);
            });
        }

        function renderOrders(status = 'all') {
            const orders = getOrders();
            const ordersTable = document.getElementById('orders-table').querySelector('tbody');
            ordersTable.innerHTML = '';
            
            const filteredOrders = status === 'all' ? orders : orders.filter(order => order.status === status);
            
            filteredOrders.forEach(order => {
                const row = document.createElement('tr');
                
                let statusClass = '';
                let statusText = '';
                switch(order.status) {
                    case 'pending':
                        statusClass = 'text-warning';
                        statusText = 'Pendente';
                        break;
                    case 'processing':
                        statusClass = 'text-warning';
                        statusText = 'Processando';
                        break;
                    case 'shipped':
                        statusClass = 'text-success';
                        statusText = 'Enviado';
                        break;
                    case 'delivered':
                        statusClass = 'text-success';
                        statusText = 'Entregue';
                        break;
                }
                
                row.innerHTML = `
                    <td>#LM${order.id}</td>
                    <td>${order.customer}</td>
                    <td>${formatDate(order.date)}</td>
                    <td>R$ ${order.total.toFixed(2).replace('.', ',')}</td>
                    <td class="${statusClass}">${statusText}</td>
                    <td>
                        <button class="btn btn-primary btn-sm view-order-btn" data-id="${order.id}">Detalhes</button>
                        <select class="order-status-select" data-id="${order.id}" style="padding: 5px; border-radius: 4px;">
                            <option value="pending" ${order.status === 'pending' ? 'selected' : ''}>Pendente</option>
                            <option value="processing" ${order.status === 'processing' ? 'selected' : ''}>Processando</option>
                            <option value="shipped" ${order.status === 'shipped' ? 'selected' : ''}>Enviado</option>
                            <option value="delivered" ${order.status === 'delivered' ? 'selected' : ''}>Entregue</option>
                        </select>
                    </td>
                `;
                
                ordersTable.appendChild(row);
            });
        }

        function renderCustomers() {
            const customers = getCustomers();
            const customersTable = document.getElementById('customers-table').querySelector('tbody');
            customersTable.innerHTML = '';
            
            customers.forEach(customer => {
                const row = document.createElement('tr');
                
                row.innerHTML = `
                    <td>${customer.name}</td>
                    <td>${customer.email}</td>
                    <td>${customer.phone}</td>
                    <td>${customer.orders}</td>
                    <td>${formatDate(customer.joinDate)}</td>
                    <td>
                        <button class="btn btn-primary btn-sm view-customer-btn" data-id="${customer.id}">Ver</button>
                    </td>
                `;
                
                customersTable.appendChild(row);
            });
        }

        function renderSettings() {
            const settings = getSettings();
            document.getElementById('store-name').value = settings.storeName;
            document.getElementById('store-email').value = settings.email;
            document.getElementById('store-phone').value = settings.phone;
            document.getElementById('store-address').value = settings.address;
        }

        // Funções auxiliares
        function formatDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('pt-BR');
        }

        function formatCategory(category) {
            const categories = {
                'peças': 'Peças',
                'pneus': 'Pneus',
                'acessorios': 'Acessórios',
                'vestuario': 'Vestuário',
                'oleos': 'Óleos e Fluidos'
            };
            return categories[category] || category;
        }

        function showTab(tabId) {
            // Esconder todas as tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // Mostrar a tab selecionada
            document.getElementById(tabId).classList.add('active');
            
            // Atualizar menu ativo
            document.querySelectorAll('.admin-menu li a').forEach(link => {
                link.classList.remove('active');
            });
            
            document.querySelector(`.admin-menu li a[data-tab="${tabId}"]`).classList.add('active');
            
            // Renderizar conteúdo da tab
            switch(tabId) {
                case 'dashboard':
                    renderDashboard();
                    break;
                case 'products':
                    renderProducts();
                    break;
                case 'orders':
                    renderOrders();
                    break;
                case 'customers':
                    renderCustomers();
                    break;
                case 'settings':
                    renderSettings();
                    break;
            }
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            initializeData();
            
            // Login Form
            document.getElementById('login-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const username = document.getElementById('username').value;
                const password = document.getElementById('password').value;
                const settings = getSettings();
                
                if (username === 'admin' && password === settings.adminPassword) {
                    document.getElementById('login-screen').style.display = 'none';
                    document.getElementById('admin-panel').style.display = 'flex';
                    renderDashboard();
                } else {
                    alert('Usuário ou senha incorretos!');
                }
            });
            
            // Logout Button
            document.getElementById('logout-btn').addEventListener('click', function() {
                document.getElementById('admin-panel').style.display = 'none';
                document.getElementById('login-screen').style.display = 'flex';
                document.getElementById('login-form').reset();
            });
            
            // Menu Tabs
            document.querySelectorAll('.admin-menu li a').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    const tabId = this.getAttribute('data-tab');
                    showTab(tabId);
                });
            });
            
            // Order Tabs
            document.querySelectorAll('#orders .tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('#orders .tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const status = this.getAttribute('data-order-status');
                    renderOrders(status);
                });
            });
            
            // Product Form
            document.getElementById('add-product-btn').addEventListener('click', function() {
                document.getElementById('product-form-container').style.display = 'block';
                document.getElementById('form-title').textContent = 'Adicionar Novo Produto';
                document.getElementById('product-form').reset();
                document.getElementById('product-id').value = '';
            });
            
            document.getElementById('cancel-product-btn').addEventListener('click', function() {
                document.getElementById('product-form-container').style.display = 'none';
            });
            
            document.getElementById('product-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const productId = document.getElementById('product-id').value;
                const productData = {
                    name: document.getElementById('product-name').value,
                    brand: document.getElementById('product-brand').value,
                    category: document.getElementById('product-category').value,
                    price: parseFloat(document.getElementById('product-price').value),
                    stock: parseInt(document.getElementById('product-stock').value),
                    description: document.getElementById('product-description').value,
                    image: document.getElementById('product-image').value || 'https://via.placeholder.com/300x300?text=Produto+Lima+Motos'
                };
                
                const products = getProducts();
                
                if (productId) {
                    // Editar produto existente
                    const index = products.findIndex(p => p.id == productId);
                    if (index !== -1) {
                        products[index] = { ...products[index], ...productData };
                    }
                } else {
                    // Adicionar novo produto
                    const newId = products.length > 0 ? Math.max(...products.map(p => p.id)) + 1 : 1;
                    productData.id = newId;
                    products.push(productData);
                }
                
                saveProducts(products);
                document.getElementById('product-form-container').style.display = 'none';
                renderProducts();
                renderDashboard();
                
                alert('Produto salvo com sucesso!');
            });
            
            // Editar/Excluir Produtos (delegação de eventos)
            document.getElementById('products-table').addEventListener('click', function(e) {
                if (e.target.classList.contains('edit-product-btn')) {
                    const productId = e.target.getAttribute('data-id');
                    const products = getProducts();
                    const product = products.find(p => p.id == productId);
                    
                    if (product) {
                        document.getElementById('product-id').value = product.id;
                        document.getElementById('product-name').value = product.name;
                        document.getElementById('product-brand').value = product.brand;
                        document.getElementById('product-category').value = product.category;
                        document.getElementById('product-price').value = product.price;
                        document.getElementById('product-stock').value = product.stock;
                        document.getElementById('product-description').value = product.description;
                        document.getElementById('product-image').value = product.image;
                        
                        document.getElementById('form-title').textContent = 'Editar Produto';
                        document.getElementById('product-form-container').style.display = 'block';
                    }
                }
                
                if (e.target.classList.contains('delete-product-btn')) {
                    if (confirm('Tem certeza que deseja excluir este produto?')) {
                        const productId = e.target.getAttribute('data-id');
                        const products = getProducts().filter(p => p.id != productId);
                        saveProducts(products);
                        renderProducts();
                        renderDashboard();
                        
                        alert('Produto excluído com sucesso!');
                    }
                }
            });
            
            // Settings Form
            document.getElementById('store-settings-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const settings = {
                    storeName: document.getElementById('store-name').value,
                    email: document.getElementById('store-email').value,
                    phone: document.getElementById('store-phone').value,
                    address: document.getElementById('store-address').value,
                    adminPassword: getSettings().adminPassword // Mantém a senha atual
                };
                
                saveSettings(settings);
                alert('Configurações salvas com sucesso!');
            });
            
            // Change Password Form
            document.getElementById('change-password-form').addEventListener('submit', function(e) {
                e.preventDefault();
                
                const currentPassword = document.getElementById('current-password').value;
                const newPassword = document.getElementById('new-password').value;
                const confirmPassword = document.getElementById('confirm-password').value;
                
                const settings = getSettings();
                
                if (currentPassword !== settings.adminPassword) {
                    alert('Senha atual incorreta!');
                    return;
                }
                
                if (newPassword !== confirmPassword) {
                    alert('As novas senhas não coincidem!');
                    return;
                }
                
                settings.adminPassword = newPassword;
                saveSettings(settings);
                document.getElementById('change-password-form').reset();
                alert('Senha alterada com sucesso!');
            });
            
            // Product Search
            document.getElementById('product-search').addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                const rows = document.querySelectorAll('#products-table tbody tr');
                
                rows.forEach(row => {
                    const productName = row.cells[0].textContent.toLowerCase();
                    const productBrand = row.cells[1].textContent.toLowerCase();
                    const text = productName + ' ' + productBrand;
                    
                    if (text.includes(searchTerm)) {
                        row.style.display = '';
                    } else {
                        row.style.display = 'none';
                    }
                });
            });
        });
    </script>
</body>
</html>
